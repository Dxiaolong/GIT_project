define(['./DistributionMap.class', 'lib/echarts/echarts', '../../../lib/configBase/commonMethod'], function(
    distributionMap,
    echarts,
    commonMethod
) {
    const CONFIG = new window.lanto.modules.Common_config()
    const configFlag = CONFIG.common.flag
    //'./config/config'
    const defaultOption = {
        type: 'distributionMap',
        name: '分布地图',
        options: {
            series: {
                type: 'map',
                _region: '中国',
                mapType: 'China',
                nameMap: {
                    china: 'china',
                    北京: '北京',
                    天津: '天津',
                    上海: '上海',
                    重庆: '重庆',
                    河北: '河北',
                    河南: '河南',
                    云南: '云南',
                    辽宁: '辽宁',
                    黑龙江: '黑龙江',
                    湖南: '湖南',
                    安徽: '安徽',
                    山东: '山东',
                    新疆: '新疆',
                    江苏: '江苏',
                    浙江: '浙江',
                    江西: '江西',
                    湖北: '湖北',
                    广西: '广西',
                    甘肃: '甘肃',
                    山西: '山西',
                    内蒙古: '内蒙古',
                    陕西: '陕西',
                    吉林: '吉林',
                    福建: '福建',
                    贵州: '贵州',
                    广东: '广东',
                    青海: '青海',
                    西藏: '西藏',
                    四川: '四川',
                    宁夏: '宁夏',
                    海南: '海南',
                    台湾: '台湾',
                    香港: '香港',
                    澳门: '澳门',
                    巴音郭楞蒙古自治州: '巴音郭楞蒙古自治州',
                    和田地区: '和田地区',
                    哈密地区: '哈密地区',
                    阿克苏地区: '阿克苏地区',
                    阿勒泰地区: '阿勒泰地区',
                    喀什地区: '喀什地区',
                    塔城地区: '塔城地区',
                    昌吉回族自治州: '昌吉回族自治州',
                    克孜勒苏柯尔克孜自治州: '克孜勒苏柯尔克孜自治州',
                    吐鲁番地区: '吐鲁番地区',
                    伊犁哈萨克自治州: '伊犁哈萨克自治州',
                    博尔塔拉蒙古自治州: '博尔塔拉蒙古自治州',
                    乌鲁木齐市: '乌鲁木齐市',
                    克拉玛依市: '克拉玛依市',
                    阿拉尔市: '阿拉尔市',
                    图木舒克市: '图木舒克市',
                    五家渠市: '五家渠市',
                    石河子市: '石河子市',
                    那曲地区: '那曲地区',
                    阿里地区: '阿里地区',
                    日喀则地区: '日喀则地区',
                    林芝地区: '林芝地区',
                    昌都地区: '昌都地区',
                    山南地区: '山南地区',
                    拉萨市: '拉萨市',
                    呼伦贝尔市: '呼伦贝尔市',
                    阿拉善盟: '阿拉善盟',
                    锡林郭勒盟: '锡林郭勒盟',
                    鄂尔多斯市: '鄂尔多斯市',
                    赤峰市: '赤峰市',
                    巴彦淖尔市: '巴彦淖尔市',
                    通辽市: '通辽市',
                    乌兰察布市: '乌兰察布市',
                    兴安盟: '兴安盟',
                    包头市: '包头市',
                    呼和浩特市: '呼和浩特市',
                    乌海市: '乌海市',
                    海西蒙古族藏族自治州: '海西蒙古族藏族自治州',
                    玉树藏族自治州: '玉树藏族自治州',
                    果洛藏族自治州: '果洛藏族自治州',
                    海南藏族自治州: '海南藏族自治州',
                    海北藏族自治州: '海北藏族自治州',
                    黄南藏族自治州: '黄南藏族自治州',
                    海东地区: '海东地区',
                    西宁市: '西宁市',
                    甘孜藏族自治州: '甘孜藏族自治州',
                    阿坝藏族羌族自治州: '阿坝藏族羌族自治州',
                    凉山彝族自治州: '凉山彝族自治州',
                    绵阳市: '绵阳市',
                    达州市: '达州市',
                    广元市: '广元市',
                    雅安市: '雅安市',
                    宜宾市: '宜宾市',
                    乐山市: '乐山市',
                    南充市: '南充市',
                    巴中市: '巴中市',
                    泸州市: '泸州市',
                    成都市: '成都市',
                    资阳市: '资阳市',
                    攀枝花市: '攀枝花市',
                    眉山市: '眉山市',
                    广安市: '广安市',
                    德阳市: '德阳市',
                    内江市: '内江市',
                    遂宁市: '遂宁市',
                    自贡市: '自贡市',
                    黑河市: '黑河市',
                    大兴安岭地区: '大兴安岭地区',
                    哈尔滨市: '哈尔滨市',
                    齐齐哈尔市: '齐齐哈尔市',
                    牡丹江市: '牡丹江市',
                    绥化市: '绥化市',
                    伊春市: '伊春市',
                    佳木斯市: '佳木斯市',
                    鸡西市: '鸡西市',
                    双鸭山市: '双鸭山市',
                    大庆市: '大庆市',
                    鹤岗市: '鹤岗市',
                    七台河市: '七台河市',
                    酒泉市: '酒泉市',
                    张掖市: '张掖市',
                    甘南藏族自治州: '甘南藏族自治州',
                    武威市: '武威市',
                    陇南市: '陇南市',
                    庆阳市: '庆阳市',
                    白银市: '白银市',
                    定西市: '定西市',
                    天水市: '天水市',
                    兰州市: '兰州市',
                    平凉市: '平凉市',
                    临夏回族自治州: '临夏回族自治州',
                    金昌市: '金昌市',
                    嘉峪关市: '嘉峪关市',
                    普洱市: '普洱市',
                    红河哈尼族彝族自治州: '红河哈尼族彝族自治州',
                    文山壮族苗族自治州: '文山壮族苗族自治州',
                    曲靖市: '曲靖市',
                    楚雄彝族自治州: '楚雄彝族自治州',
                    大理白族自治州: '大理白族自治州',
                    临沧市: '临沧市',
                    迪庆藏族自治州: '迪庆藏族自治州',
                    昭通市: '昭通市',
                    昆明市: '昆明市',
                    丽江市: '丽江市',
                    西双版纳傣族自治州: '西双版纳傣族自治州',
                    保山市: '保山市',
                    玉溪市: '玉溪市',
                    怒江傈僳族自治州: '怒江傈僳族自治州',
                    德宏傣族景颇族自治州: '德宏傣族景颇族自治州',
                    百色市: '百色市',
                    河池市: '河池市',
                    桂林市: '桂林市',
                    南宁市: '南宁市',
                    柳州市: '柳州市',
                    崇左市: '崇左市',
                    来宾市: '来宾市',
                    玉林市: '玉林市',
                    梧州市: '梧州市',
                    贺州市: '贺州市',
                    钦州市: '钦州市',
                    贵港市: '贵港市',
                    防城港市: '防城港市',
                    北海市: '北海市',
                    怀化市: '怀化市',
                    永州市: '永州市',
                    邵阳市: '邵阳市',
                    郴州市: '郴州市',
                    常德市: '常德市',
                    湘西土家族苗族自治州: '湘西土家族苗族自治州',
                    衡阳市: '衡阳市',
                    岳阳市: '岳阳市',
                    益阳市: '益阳市',
                    长沙市: '长沙市',
                    株洲市: '株洲市',
                    张家界市: '张家界市',
                    娄底市: '娄底市',
                    湘潭市: '湘潭市',
                    榆林市: '榆林市',
                    延安市: '延安市',
                    汉中市: '汉中市',
                    安康市: '安康市',
                    商洛市: '商洛市',
                    宝鸡市: '宝鸡市',
                    渭南市: '渭南市',
                    咸阳市: '咸阳市',
                    西安市: '西安市',
                    铜川市: '铜川市',
                    清远市: '清远市',
                    韶关市: '韶关市',
                    湛江市: '湛江市',
                    梅州市: '梅州市',
                    河源市: '河源市',
                    肇庆市: '肇庆市',
                    惠州市: '惠州市',
                    茂名市: '茂名市',
                    江门市: '江门市',
                    阳江市: '阳江市',
                    云浮市: '云浮市',
                    广州市: '广州市',
                    汕尾市: '汕尾市',
                    揭阳市: '揭阳市',
                    珠海市: '珠海市',
                    佛山市: '佛山市',
                    潮州市: '潮州市',
                    汕头市: '汕头市',
                    深圳市: '深圳市',
                    东莞市: '东莞市',
                    中山市: '中山市',
                    延边朝鲜族自治州: '延边朝鲜族自治州',
                    吉林市: '吉林市',
                    白城市: '白城市',
                    松原市: '松原市',
                    长春市: '长春市',
                    白山市: '白山市',
                    通化市: '通化市',
                    四平市: '四平市',
                    辽源市: '辽源市',
                    承德市: '承德市',
                    张家口市: '张家口市',
                    保定市: '保定市',
                    唐山市: '唐山市',
                    沧州市: '沧州市',
                    石家庄市: '石家庄市',
                    邢台市: '邢台市',
                    邯郸市: '邯郸市',
                    秦皇岛市: '秦皇岛市',
                    衡水市: '衡水市',
                    廊坊市: '廊坊市',
                    恩施土家族苗族自治州: '恩施土家族苗族自治州',
                    十堰市: '十堰市',
                    宜昌市: '宜昌市',
                    襄樊市: '襄樊市',
                    黄冈市: '黄冈市',
                    荆州市: '荆州市',
                    荆门市: '荆门市',
                    咸宁市: '咸宁市',
                    随州市: '随州市',
                    孝感市: '孝感市',
                    武汉市: '武汉市',
                    黄石市: '黄石市',
                    神农架林区: '神农架林区',
                    天门市: '天门市',
                    仙桃市: '仙桃市',
                    潜江市: '潜江市',
                    鄂州市: '鄂州市',
                    遵义市: '遵义市',
                    黔东南苗族侗族自治州: '黔东南苗族侗族自治州',
                    毕节地区: '毕节地区',
                    黔南布依族苗族自治州: '黔南布依族苗族自治州',
                    铜仁地区: '铜仁地区',
                    黔西南布依族苗族自治州: '黔西南布依族苗族自治州',
                    六盘水市: '六盘水市',
                    安顺市: '安顺市',
                    贵阳市: '贵阳市',
                    烟台市: '烟台市',
                    临沂市: '临沂市',
                    潍坊市: '潍坊市',
                    青岛市: '青岛市',
                    菏泽市: '菏泽市',
                    济宁市: '济宁市',
                    德州市: '德州市',
                    滨州市: '滨州市',
                    聊城市: '聊城市',
                    东营市: '东营市',
                    济南市: '济南市',
                    泰安市: '泰安市',
                    威海市: '威海市',
                    日照市: '日照市',
                    淄博市: '淄博市',
                    枣庄市: '枣庄市',
                    莱芜市: '莱芜市',
                    赣州市: '赣州市',
                    吉安市: '吉安市',
                    上饶市: '上饶市',
                    九江市: '九江市',
                    抚州市: '抚州市',
                    宜春市: '宜春市',
                    南昌市: '南昌市',
                    景德镇市: '景德镇市',
                    萍乡市: '萍乡市',
                    鹰潭市: '鹰潭市',
                    新余市: '新余市',
                    南阳市: '南阳市',
                    信阳市: '信阳市',
                    洛阳市: '洛阳市',
                    驻马店市: '驻马店市',
                    周口市: '周口市',
                    商丘市: '商丘市',
                    三门峡市: '三门峡市',
                    新乡市: '新乡市',
                    平顶山市: '平顶山市',
                    郑州市: '郑州市',
                    安阳市: '安阳市',
                    开封市: '开封市',
                    焦作市: '焦作市',
                    许昌市: '许昌市',
                    濮阳市: '濮阳市',
                    漯河市: '漯河市',
                    鹤壁市: '鹤壁市',
                    大连市: '大连市',
                    朝阳市: '朝阳市',
                    丹东市: '丹东市',
                    铁岭市: '铁岭市',
                    沈阳市: '沈阳市',
                    抚顺市: '抚顺市',
                    葫芦岛市: '葫芦岛市',
                    阜新市: '阜新市',
                    锦州市: '锦州市',
                    鞍山市: '鞍山市',
                    本溪市: '本溪市',
                    营口市: '营口市',
                    辽阳市: '辽阳市',
                    盘锦市: '盘锦市',
                    忻州市: '忻州市',
                    吕梁市: '吕梁市',
                    临汾市: '临汾市',
                    晋中市: '晋中市',
                    运城市: '运城市',
                    大同市: '大同市',
                    长治市: '长治市',
                    朔州市: '朔州市',
                    晋城市: '晋城市',
                    太原市: '太原市',
                    阳泉市: '阳泉市',
                    六安市: '六安市',
                    安庆市: '安庆市',
                    滁州市: '滁州市',
                    宣城市: '宣城市',
                    阜阳市: '阜阳市',
                    宿州市: '宿州市',
                    黄山市: '黄山市',
                    巢湖市: '巢湖市',
                    亳州市: '亳州市',
                    池州市: '池州市',
                    合肥市: '合肥市',
                    蚌埠市: '蚌埠市',
                    芜湖市: '芜湖市',
                    淮北市: '淮北市',
                    淮南市: '淮南市',
                    马鞍山市: '马鞍山市',
                    铜陵市: '铜陵市',
                    南平市: '南平市',
                    三明市: '三明市',
                    龙岩市: '龙岩市',
                    宁德市: '宁德市',
                    福州市: '福州市',
                    漳州市: '漳州市',
                    泉州市: '泉州市',
                    莆田市: '莆田市',
                    厦门市: '厦门市',
                    丽水市: '丽水市',
                    杭州市: '杭州市',
                    温州市: '温州市',
                    宁波市: '宁波市',
                    舟山市: '舟山市',
                    台州市: '台州市',
                    金华市: '金华市',
                    衢州市: '衢州市',
                    绍兴市: '绍兴市',
                    嘉兴市: '嘉兴市',
                    湖州市: '湖州市',
                    盐城市: '盐城市',
                    徐州市: '徐州市',
                    南通市: '南通市',
                    淮安市: '淮安市',
                    苏州市: '苏州市',
                    宿迁市: '宿迁市',
                    连云港市: '连云港市',
                    扬州市: '扬州市',
                    南京市: '南京市',
                    泰州市: '泰州市',
                    无锡市: '无锡市',
                    常州市: '常州市',
                    镇江市: '镇江市',
                    酉阳土家族苗族自治县: '酉阳土家族苗族自治县',
                    奉节县: '奉节县',
                    巫溪县: '巫溪县',
                    开县: '开县',
                    彭水苗族土家族自治县: '彭水苗族土家族自治县',
                    云阳县: '云阳县',
                    万州区: '万州区',
                    城口县: '城口县',
                    江津区: '江津区',
                    石柱土家族自治县: '石柱土家族自治县',
                    巫山县: '巫山县',
                    涪陵区: '涪陵区',
                    丰都县: '丰都县',
                    武隆县: '武隆县',
                    南川区: '南川区',
                    秀山土家族苗族自治县: '秀山土家族苗族自治县',
                    黔江区: '黔江区',
                    合川区: '合川区',
                    綦江县: '綦江县',
                    忠县: '忠县',
                    梁平县: '梁平县',
                    巴南区: '巴南区',
                    潼南县: '潼南县',
                    永川区: '永川区',
                    垫江县: '垫江县',
                    渝北区: '渝北区',
                    长寿区: '长寿区',
                    大足县: '大足县',
                    铜梁县: '铜梁县',
                    荣昌县: '荣昌县',
                    璧山县: '璧山县',
                    北碚区: '北碚区',
                    万盛区: '万盛区',
                    九龙坡区: '九龙坡区',
                    沙坪坝区: '沙坪坝区',
                    南岸区: '南岸区',
                    江北区: '江北区',
                    大渡口区: '大渡口区',
                    双桥区: '双桥区',
                    渝中区: '渝中区',
                    吴忠市: '吴忠市',
                    中卫市: '中卫市',
                    固原市: '固原市',
                    银川市: '银川市',
                    石嘴山市: '石嘴山市',
                    儋州市: '儋州市',
                    文昌市: '文昌市',
                    乐东黎族自治县: '乐东黎族自治县',
                    三亚市: '三亚市',
                    琼中黎族苗族自治县: '琼中黎族苗族自治县',
                    东方市: '东方市',
                    海口市: '海口市',
                    万宁市: '万宁市',
                    澄迈县: '澄迈县',
                    白沙黎族自治县: '白沙黎族自治县',
                    琼海市: '琼海市',
                    昌江黎族自治县: '昌江黎族自治县',
                    临高县: '临高县',
                    陵水黎族自治县: '陵水黎族自治县',
                    屯昌县: '屯昌县',
                    定安县: '定安县',
                    保亭黎族苗族自治县: '保亭黎族苗族自治县',
                    五指山市: '五指山市',
                    密云县: '密云县',
                    怀柔区: '怀柔区',
                    房山区: '房山区',
                    延庆县: '延庆县',
                    门头沟区: '门头沟区',
                    昌平区: '昌平区',
                    大兴区: '大兴区',
                    顺义区: '顺义区',
                    平谷区: '平谷区',
                    通州区: '通州区',
                    朝阳区: '朝阳区',
                    海淀区: '海淀区',
                    丰台区: '丰台区',
                    石景山区: '石景山区',
                    西城区: '西城区',
                    东城区: '东城区',
                    宣武区: '宣武区',
                    崇文区: '崇文区',
                    蓟县: '蓟县',
                    武清区: '武清区',
                    宝坻区: '宝坻区',
                    静海县: '静海县',
                    宁河县: '宁河县',
                    大港区: '大港区',
                    塘沽区: '塘沽区',
                    西青区: '西青区',
                    北辰区: '北辰区',
                    东丽区: '东丽区',
                    汉沽区: '汉沽区',
                    津南区: '津南区',
                    河西区: '河西区',
                    河东区: '河东区',
                    南开区: '南开区',
                    河北区: '河北区',
                    红桥区: '红桥区',
                    和平区: '和平区',
                    崇明县: '崇明县',
                    南汇区: '南汇区',
                    奉贤区: '奉贤区',
                    浦东新区: '浦东新区',
                    金山区: '金山区',
                    青浦区: '青浦区',
                    松江区: '松江区',
                    嘉定区: '嘉定区',
                    宝山区: '宝山区',
                    闵行区: '闵行区',
                    杨浦区: '杨浦区',
                    普陀区: '普陀区',
                    徐汇区: '徐汇区',
                    长宁区: '长宁区',
                    闸北区: '闸北区',
                    虹口区: '虹口区',
                    黄浦区: '黄浦区',
                    卢湾区: '卢湾区',
                    静安区: '静安区',
                    南海诸岛: '南海诸岛'
                }
            }
        }
    }
    const util = new lanto.modules.common_Util()
    var _ = util._
    var $ = util.$
    var component = {
        name: 'distributionMap',
        components: {},
        mixins: [commonMethod.commonMethod],
        data() {
            return {}
        },
        mounted() {
            this.chart = new distributionMap(defaultOption)
            this.$on('before-query', queryIns => {
                this.chart.beforeQuery(queryIns)
            })
            // this.chart._cacheStack = this.$parent.option.option._stackAr.slice()
            // this.$on('level-info-change', (columns, path) => {
            //     this.chart.option._stackAr = path ? path.split(configFlag) : []
            //     // console.log('level-info-change=====:', this.chart.option._stackAr)
            // })
            // this.chart.load(this.config.option, $(this.$el))
        },
        watch: {
            'config.filter': {
                handler: function(n, o) {
                    // console.log('filterChange=====:', n)
                },
                deep: true
            }
        },
        props: {
            config: {
                type: Object,
                default() {
                    return { option: {}, width: '100%', height: '100%' }
                }
            }
        },
        methods: {
            // getData() {
            //     var chartOption = this.$refs.chartIns.getOptions()
            //     var data = Object.assign({}, chartOption)
            //     data.dataset = null
            //     delete data.dataset
            //     return data
            // },
            // setOptions(options) {
            //     this.chart.load(options, $(this.$el))
            // },
            // getOptions() {
            //     return this.chart.getOption()
            // },
            clearData() {
                // if (!this.chart || !this.$parent.option.option) return
                // this.chart._cacheStack = this.$parent.option.option._stackAr.slice()
            },
            parseEventParams(params) {
                return this.chart.parseEventParams(params)
            },
            setDataSource(data, card, type) {
                let option = this.chart.option
                let series = option.series[0]
                let region = series._region
                let initMap = echarts.getMap('China')
                let that = this
                if (region !== '中国') {
                    //delete options.option._stackAr
                    if (!initMap) {
                        that.chart.loadJson('China', 'China', geoJson => {
                            series.mapType = region
                            let cur = geoJson.features.filter(v => {
                                return v.properties.name === region
                            })[0]
                            that.chart.loadJson(cur.id || cur.properties.id, region, () => {
                                this.chart.setDataSource(data, card || {}, type)
                            })
                        })
                    } else {
                        this.chart.setDataSource(data, card || {}, type)
                    }
                } else {
                    this.chart.setDataSource(data, card || {}, type)
                }
            }
            // setStyle(options) {
            //     this.chart.setStyle(options)
            // },
            // markLine(analysis, data) {
            //     this.chart.markLine(analysis, data)
            // },
            // setMarkLineStyle(id, opt) {
            //     this.chart.setMarkLineStyle(id, opt)
            // },
            // delMarkLine(id) {
            //     this.chart.delMarkLine(id)
            // },
            // resize() {
            //     this.chart.resize()
            // }
        },
        template: `<div :style="{width: config.width+'px', height: config.height+'px'}"></div>`
    }
    // render(h) {}
    return { component: component } //, config: new config()
})
